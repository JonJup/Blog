<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Creating Maps in R | Spatial Data Science in R</title>
  <meta name="description" content="Lessons and tasks from GIS courses by Jonathan Jupke" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Creating Maps in R | Spatial Data Science in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Lessons and tasks from GIS courses by Jonathan Jupke" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Creating Maps in R | Spatial Data Science in R" />
  
  <meta name="twitter:description" content="Lessons and tasks from GIS courses by Jonathan Jupke" />
  

<meta name="author" content="Jonathan Jupke" />


<meta name="date" content="2023-01-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="rasters-in-r-the-terra-package.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.0/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />
<script src="libs/lfx-sidebyside-1.0.0/lfx-side-by-side.js"></script>
<script src="libs/lfx-sidebyside-1.0.0/lfx-side-by-side-bindings.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Spatial Data Science in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction to the sf package</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#loading-sptial-data-into-r"><i class="fa fa-check"></i><b>1.1</b> Loading sptial data into R</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#creating-spatial-data-yourself."><i class="fa fa-check"></i><b>1.2</b> Creating spatial data yourself.</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#basic-operations"><i class="fa fa-check"></i><b>1.3</b> Basic operations</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#useful-functions"><i class="fa fa-check"></i><b>1.4</b> Useful functions</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#st_area"><i class="fa fa-check"></i><b>1.4.1</b> <code>st_area</code></a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#st_distance"><i class="fa fa-check"></i><b>1.4.2</b> <code>st_distance</code></a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#st_nearest_feature"><i class="fa fa-check"></i><b>1.4.3</b> <code>st_nearest_feature</code></a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#spatial-subsetting"><i class="fa fa-check"></i><b>1.4.4</b> spatial subsetting</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#spatial-joins"><i class="fa fa-check"></i><b>1.4.5</b> Spatial joins</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#spatial-aggregation"><i class="fa fa-check"></i><b>1.4.6</b> Spatial Aggregation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html"><i class="fa fa-check"></i><b>2</b> Point Pattern Analysis</a>
<ul>
<li class="chapter" data-level="2.1" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#the-ppp-class"><i class="fa fa-check"></i><b>2.1</b> the ppp class</a></li>
<li class="chapter" data-level="2.2" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#first-order-processes"><i class="fa fa-check"></i><b>2.2</b> First order processes</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#kernel-density"><i class="fa fa-check"></i><b>2.2.1</b> Kernel density</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#second-order-processes"><i class="fa fa-check"></i><b>2.3</b> Second order processes</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#average-nearest-neighbor"><i class="fa fa-check"></i><b>2.3.1</b> Average nearest neighbor</a></li>
<li class="chapter" data-level="2.3.2" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#the-k-funktion"><i class="fa fa-check"></i><b>2.3.2</b> The K-Funktion</a></li>
<li class="chapter" data-level="2.3.3" data-path="point-pattern-analysis.html"><a href="point-pattern-analysis.html#morans-i"><i class="fa fa-check"></i><b>2.3.3</b> Morans I</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="interpolation.html"><a href="interpolation.html"><i class="fa fa-check"></i><b>3</b> Interpolation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="interpolation.html"><a href="interpolation.html#the-data"><i class="fa fa-check"></i><b>3.1</b> The data</a></li>
<li class="chapter" data-level="3.2" data-path="interpolation.html"><a href="interpolation.html#proximity-polygons"><i class="fa fa-check"></i><b>3.2</b> Proximity Polygons</a></li>
<li class="chapter" data-level="3.3" data-path="interpolation.html"><a href="interpolation.html#trend-surface-analysis"><i class="fa fa-check"></i><b>3.3</b> Trend Surface Analysis</a></li>
<li class="chapter" data-level="3.4" data-path="interpolation.html"><a href="interpolation.html#splines"><i class="fa fa-check"></i><b>3.4</b> Splines</a></li>
<li class="chapter" data-level="3.5" data-path="interpolation.html"><a href="interpolation.html#weighted-averaging"><i class="fa fa-check"></i><b>3.5</b> Weighted averaging</a></li>
<li class="chapter" data-level="3.6" data-path="interpolation.html"><a href="interpolation.html#kriging"><i class="fa fa-check"></i><b>3.6</b> Kriging</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>4</b> Machine Learning</a>
<ul>
<li class="chapter" data-level="4.1" data-path="machine-learning.html"><a href="machine-learning.html#terrain-analysis-with-terra"><i class="fa fa-check"></i><b>4.1</b> Terrain analysis with terra</a></li>
<li class="chapter" data-level="4.2" data-path="machine-learning.html"><a href="machine-learning.html#ploting-the-data"><i class="fa fa-check"></i><b>4.2</b> Ploting the data</a></li>
<li class="chapter" data-level="4.3" data-path="machine-learning.html"><a href="machine-learning.html#logistic-regression"><i class="fa fa-check"></i><b>4.3</b> Logistic regression</a></li>
<li class="chapter" data-level="4.4" data-path="machine-learning.html"><a href="machine-learning.html#mlr3"><i class="fa fa-check"></i><b>4.4</b> mlr3</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="machine-learning.html"><a href="machine-learning.html#creating-a-task"><i class="fa fa-check"></i><b>4.4.1</b> Creating a <em>task</em></a></li>
<li class="chapter" data-level="4.4.2" data-path="machine-learning.html"><a href="machine-learning.html#the-learner"><i class="fa fa-check"></i><b>4.4.2</b> The <em>learner</em></a></li>
<li class="chapter" data-level="4.4.3" data-path="machine-learning.html"><a href="machine-learning.html#hyperparameter-tuning"><i class="fa fa-check"></i><b>4.4.3</b> Hyperparameter Tuning</a></li>
<li class="chapter" data-level="4.4.4" data-path="machine-learning.html"><a href="machine-learning.html#predictions"><i class="fa fa-check"></i><b>4.4.4</b> Predictions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="graph-analysis.html"><a href="graph-analysis.html"><i class="fa fa-check"></i><b>5</b> Graph Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="graph-analysis.html"><a href="graph-analysis.html#the-igraph-package"><i class="fa fa-check"></i><b>5.1</b> The igraph package</a></li>
<li class="chapter" data-level="5.2" data-path="graph-analysis.html"><a href="graph-analysis.html#from-data-to-graph"><i class="fa fa-check"></i><b>5.2</b> From data to graph</a></li>
<li class="chapter" data-level="5.3" data-path="graph-analysis.html"><a href="graph-analysis.html#centrality-measures"><i class="fa fa-check"></i><b>5.3</b> Centrality measures</a></li>
<li class="chapter" data-level="5.4" data-path="graph-analysis.html"><a href="graph-analysis.html#visualization"><i class="fa fa-check"></i><b>5.4</b> Visualization</a></li>
<li class="chapter" data-level="5.5" data-path="graph-analysis.html"><a href="graph-analysis.html#network-models"><i class="fa fa-check"></i><b>5.5</b> Network Models</a></li>
<li class="chapter" data-level="5.6" data-path="graph-analysis.html"><a href="graph-analysis.html#optimal-channel-networks"><i class="fa fa-check"></i><b>5.6</b> Optimal Channel Networks</a></li>
<li class="chapter" data-level="5.7" data-path="graph-analysis.html"><a href="graph-analysis.html#sfnetworks"><i class="fa fa-check"></i><b>5.7</b> sfnetworks</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="graph-analysis.html"><a href="graph-analysis.html#finding-paths-in-the-network"><i class="fa fa-check"></i><b>5.7.1</b> Finding paths in the network</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html"><i class="fa fa-check"></i><b>6</b> Rasters in R: The terra package</a>
<ul>
<li class="chapter" data-level="6.1" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#basic-idea"><i class="fa fa-check"></i><b>6.1</b> Basic idea</a></li>
<li class="chapter" data-level="6.2" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#creating-a-new-raster"><i class="fa fa-check"></i><b>6.2</b> Creating a new Raster</a></li>
<li class="chapter" data-level="6.3" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#going-beyond-the-hull"><i class="fa fa-check"></i><b>6.3</b> Going beyond the hull</a></li>
<li class="chapter" data-level="6.4" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#multiple-layers-in-one-spatraster"><i class="fa fa-check"></i><b>6.4</b> Multiple layers in one SpatRaster</a></li>
<li class="chapter" data-level="6.5" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#raster-algebra"><i class="fa fa-check"></i><b>6.5</b> Raster algebra</a></li>
<li class="chapter" data-level="6.6" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#high-level-functions"><i class="fa fa-check"></i><b>6.6</b> High-level functions</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#extracting-raster-values-with-vectors"><i class="fa fa-check"></i><b>6.6.1</b> Extracting raster values with vectors</a></li>
<li class="chapter" data-level="6.6.2" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#masking"><i class="fa fa-check"></i><b>6.6.2</b> Masking</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="rasters-in-r-the-terra-package.html"><a href="rasters-in-r-the-terra-package.html#cell-level-functions"><i class="fa fa-check"></i><b>6.7</b> Cell-level functions</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html"><i class="fa fa-check"></i><b>7</b> Creating Maps in R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#tmap"><i class="fa fa-check"></i><b>7.1</b> tmap</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#basic-tmaps"><i class="fa fa-check"></i><b>7.1.1</b> Basic tmaps</a></li>
<li class="chapter" data-level="7.1.2" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#adjusting-visual-elements-and-multiple-groups"><i class="fa fa-check"></i><b>7.1.2</b> Adjusting visual elements and multiple groups</a></li>
<li class="chapter" data-level="7.1.3" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#map-extend"><i class="fa fa-check"></i><b>7.1.3</b> Map extend</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#further-map-elements"><i class="fa fa-check"></i><b>7.2</b> Further map elements</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#making-the-map-prettier"><i class="fa fa-check"></i><b>7.2.1</b> Making the map prettier</a></li>
<li class="chapter" data-level="7.2.2" data-path="creating-maps-in-r.html"><a href="creating-maps-in-r.html#save-to-maps-to-file"><i class="fa fa-check"></i><b>7.2.2</b> Save to maps to file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>8</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial Data Science in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="creating-maps-in-r" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">Chapter 7</span> Creating Maps in R<a href="creating-maps-in-r.html#creating-maps-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter gives you an introduction into basic map creation with R.
We will use a range of packages (<em>currently only tmap implemented</em>) to create both interactive (<em>not yet</em>) and static maps.
Interactive maps are great to explore your data or for interactive documents like html documents and websites. Static maps require more effort but are necessary for static documents, i.e., .pdf, docx., or pptx.
First, we load all the <code>sf</code> package which we need to represent spatial data in R.
We will also load some data to plot.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="creating-maps-in-r.html#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="co"># loading the required packages </span></span>
<span id="cb462-2"><a href="creating-maps-in-r.html#cb462-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb462-3"><a href="creating-maps-in-r.html#cb462-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)</span>
<span id="cb462-4"><a href="creating-maps-in-r.html#cb462-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="creating-maps-in-r.html#cb463-1" aria-hidden="true" tabindex="-1"></a>lucas   <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data/lucas_saxony.rds&quot;</span>)</span>
<span id="cb463-2"><a href="creating-maps-in-r.html#cb463-2" aria-hidden="true" tabindex="-1"></a>germany <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/gadm36_DEU_3_pk.gpkg&quot;</span>)</span>
<span id="cb463-3"><a href="creating-maps-in-r.html#cb463-3" aria-hidden="true" tabindex="-1"></a>rivers  <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;data/rivers_sachsen.gpkg&quot;</span>)</span></code></pre></div>
<p>We will also download a DEM for Saxony with the <code>geodata</code> package <span class="citation">(<a href="#ref-Hijmans2022b" role="doc-biblioref">Hijmans, Ghosh, and Mandel 2022</a>)</span>.
The function <code>elevation_30s()</code> downloads a DEM for Germany with a resolution of 30 arc seconds (i.e. one degree divided by 3600). For more details on the <code>geodata</code> package see <a href="https://jonjup.netlify.app/post/the-geodata-package/">here</a>.
The data are downloaded to a folder specified in the <code>path</code> argument.
Afterward, we load the data with the <code>terra</code> package.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="creating-maps-in-r.html#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geodata)</span>
<span id="cb464-2"><a href="creating-maps-in-r.html#cb464-2" aria-hidden="true" tabindex="-1"></a><span class="fu">elevation_30s</span>(<span class="at">country =</span> <span class="st">&quot;DEU&quot;</span>, <span class="at">path =</span> <span class="st">&quot;data/elevation&quot;</span>)</span>
<span id="cb464-3"><a href="creating-maps-in-r.html#cb464-3" aria-hidden="true" tabindex="-1"></a>dem <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">&quot;data/elevation/DEU_elv_msk.tif&quot;</span>)</span></code></pre></div>
<p>All the maps I create as examples here are for Saxony.
So we will extract Saxony from the <code>germany</code> data set and the raster.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="creating-maps-in-r.html#cb465-1" aria-hidden="true" tabindex="-1"></a>saxony <span class="ot">&lt;-</span> <span class="fu">filter</span>(germany, NAME_1 <span class="sc">==</span> <span class="st">&quot;Sachsen&quot;</span>)</span>
<span id="cb465-2"><a href="creating-maps-in-r.html#cb465-2" aria-hidden="true" tabindex="-1"></a>saxony_dem <span class="ot">&lt;-</span> <span class="fu">mask</span>(dem, saxony)</span>
<span id="cb465-3"><a href="creating-maps-in-r.html#cb465-3" aria-hidden="true" tabindex="-1"></a>saxony_dem <span class="ot">&lt;-</span> <span class="fu">crop</span>(saxony_dem, saxony)</span></code></pre></div>
<p>For most object classes, we can use the base <code>plot()</code> function to create a very basic static map.
For <code>sf</code> objects, we get one plot per variable.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="creating-maps-in-r.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lucas)</span></code></pre></div>
<pre><code>## Warning: plotting the first 9 out of 22 attributes; use max.plot = 22 to plot all</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-303-1.png" width="672" /></p>
<p>These maps are not very informative and should not be used for reports or presentations.
The defaul plot for rasters is already a lot better.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="creating-maps-in-r.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(dem)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-304-1.png" width="672" /></p>
<p>There are several good options to create maps with both rasters and vectors in R.
Some package can create both static and interactive maps and others are specifically designed for one of the two. We will go through several packages in order of decreasing importance.
From my experience you will rarely need other packages than <code>tmap</code> <span class="citation">(<a href="#ref-Tennekes2018" role="doc-biblioref">Tennekes 2018</a>)</span> to create good maps.
This is why we start with this package.
However, some packages provide functions that are not available in <code>tmap</code> and so will also cover several other further down.</p>
<div id="tmap" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> tmap<a href="creating-maps-in-r.html#tmap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>tmap</code> is a large package with lots of functions.
We will only scratch the surface here.
For a more in-depth introduction see <a href="https://r-tmap.github.io/tmap-book/">here</a> (at the time of writing the book is still under construction).</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="creating-maps-in-r.html#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tmap)</span></code></pre></div>
<p>Besides the regular maps, tmap can create quickmaps with the <code>qtm()</code> function that can be handy for data exploration.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="creating-maps-in-r.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qtm</span>(lucas)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-306-1.png" width="672" /></p>
<p>These maps are similar to those created by the base <code>plot()</code> function.
The main difference is that we only get one map.
While the beauty of the <code>qtm()</code> function is that we do not need to add any information besides the data set, if we want, we can add more variables.</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb471-1"><a href="creating-maps-in-r.html#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qtm</span>(lucas, <span class="at">symbols.shape =</span> <span class="dv">24</span>, <span class="at">symbols.size =</span> <span class="st">&quot;EC&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Electrical conductivity&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-307-1.png" width="672" /></p>
<div id="basic-tmaps" class="section level3 hasAnchor" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> Basic tmaps<a href="creating-maps-in-r.html#basic-tmaps" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Usually however, you will be using the regular map approach.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="creating-maps-in-r.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> </span>
<span id="cb472-2"><a href="creating-maps-in-r.html#cb472-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_symbols</span>(<span class="at">shape =</span> <span class="dv">24</span>, <span class="at">size =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-308-1.png" width="672" /></p>
<p>Here, we first provide the data set we want to plot to the <code>tm_shape()</code> function and then specify how we want to display the data.
Here, we used <code>tm_symbols()</code> but there are many different visual elements we can add to a map.
Some are just shape-explicit versions of <code>tm_symbols</code>.
For example, <code>tm_dots()</code>, <code>tm_squares()</code>, <code>tm_markers()</code>, or <code>tm_bubbles()</code>.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="creating-maps-in-r.html#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_dots</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-309-1.png" width="672" /></p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="creating-maps-in-r.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_markers</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-309-2.png" width="672" /></p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="creating-maps-in-r.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_bubbles</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-309-3.png" width="672" /></p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="creating-maps-in-r.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_squares</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-309-4.png" width="672" /></p>
<p>All of these visual elements are applicable to point data.</p>
<p>For polygons and lines we need other elements.
For lines, we use <code>tm_lines()</code>.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="creating-maps-in-r.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> <span class="fu">tm_lines</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-310-1.png" width="672" /></p>
<p>For polygons, we can use <code>tm_polygons()</code>, <code>tm_borders()</code>, or <code>tm_fill()</code>.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="creating-maps-in-r.html#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony) <span class="sc">+</span> <span class="fu">tm_polygons</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-311-1.png" width="672" /></p>
<div class="sourceCode" id="cb479"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb479-1"><a href="creating-maps-in-r.html#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony) <span class="sc">+</span> <span class="fu">tm_borders</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-311-2.png" width="672" /></p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="creating-maps-in-r.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony) <span class="sc">+</span> <span class="fu">tm_fill</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-311-3.png" width="672" /></p>
<p>For raster, we use the <code>tm_raster()</code> function.</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb481-1"><a href="creating-maps-in-r.html#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span> <span class="fu">tm_raster</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-312-1.png" width="672" /></p>
<p>So far, we have only used the most basic functionality of <code>tmap</code>.
We have specified a single data set and used one visual element to populate the map.
Most visual elements have properties that we can adjust.
We have already seen this with <code>tm_symbols()</code>, where we specified the size and shape of symbols.
Those specifications are made within the brackets following the call to the visual element.
For example, if we want to set the size of our bubbles we use:</p>
</div>
<div id="adjusting-visual-elements-and-multiple-groups" class="section level3 hasAnchor" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> Adjusting visual elements and multiple groups<a href="creating-maps-in-r.html#adjusting-visual-elements-and-multiple-groups" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="creating-maps-in-r.html#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_bubbles</span>(<span class="at">size=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-313-1.png" width="672" /></p>
<p>These attributes can either be fixed or variable.
So far we have only used fixed attributes (e.g., all points have the size 2).
Variable attributes follow variables of the data set.
We could for example control the color of the points by the electrical conductivity.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="creating-maps-in-r.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">&quot;EC&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-314-1.png" width="672" /></p>
<p>As you can see, we the name of the variable, we want to use, needs to be provided in quotation marks.
Since the electrical conductivity is a numerical variable, <code>tmap</code> automatically chooses a continuous color scale.
If we transform EC into a factor variable or a character, <code>tmap</code> would use a categorical color scale.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="creating-maps-in-r.html#cb484-1" aria-hidden="true" tabindex="-1"></a>lucas <span class="ot">&lt;-</span> <span class="fu">mutate</span>(lucas, <span class="at">EC_char =</span> <span class="fu">as.character</span>(EC))</span>
<span id="cb484-2"><a href="creating-maps-in-r.html#cb484-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">&quot;EC_char&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Number of levels of the variable &quot;EC_char&quot; is 75, which is larger than max.categories (which is 30),
## so levels are combined. Set tmap_options(max.categories = 75) in the layer function to show all levels.</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-315-1.png" width="672" /></p>
<p>For point data we generally have the arguments: size, color, transparency (alpha), border color, line width, and transparency.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="creating-maps-in-r.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> </span>
<span id="cb486-2"><a href="creating-maps-in-r.html#cb486-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">&quot;EC&quot;</span>,</span>
<span id="cb486-3"><a href="creating-maps-in-r.html#cb486-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="st">&quot;OC&quot;</span>,</span>
<span id="cb486-4"><a href="creating-maps-in-r.html#cb486-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">alpha =</span> <span class="fl">0.5</span>, </span>
<span id="cb486-5"><a href="creating-maps-in-r.html#cb486-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">border.col =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb486-6"><a href="creating-maps-in-r.html#cb486-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">border.lwd =</span> .<span class="dv">5</span>, </span>
<span id="cb486-7"><a href="creating-maps-in-r.html#cb486-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">border.alpha =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-316-1.png" width="672" /></p>
<p>For line data, we can determine the line width, color, type, and transparency.</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="creating-maps-in-r.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(rivers) <span class="sc">+</span></span>
<span id="cb487-2"><a href="creating-maps-in-r.html#cb487-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb487-3"><a href="creating-maps-in-r.html#cb487-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">lty =</span> <span class="st">&quot;dashed&quot;</span>,</span>
<span id="cb487-4"><a href="creating-maps-in-r.html#cb487-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">lwd =</span> .<span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-317-1.png" width="672" /></p>
<p>For polygons, we have similar options.
We can alter color and border type.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="creating-maps-in-r.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony) <span class="sc">+</span> </span>
<span id="cb488-2"><a href="creating-maps-in-r.html#cb488-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_fill</span>(<span class="at">col =</span> <span class="st">&quot;NAME_2&quot;</span>) <span class="sc">+</span> </span>
<span id="cb488-3"><a href="creating-maps-in-r.html#cb488-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_borders</span>(<span class="at">lty =</span> <span class="st">&quot;dashed&quot;</span>, </span>
<span id="cb488-4"><a href="creating-maps-in-r.html#cb488-4" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb488-5"><a href="creating-maps-in-r.html#cb488-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-318-1.png" width="672" /></p>
<p>As you can see, we can add multiple visual elements based on the same shape.
We can also have mutliple shapes in the same map.</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="creating-maps-in-r.html#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span> </span>
<span id="cb489-2"><a href="creating-maps-in-r.html#cb489-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb489-3"><a href="creating-maps-in-r.html#cb489-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(<span class="fu">st_union</span>(saxony)) <span class="sc">+</span> </span>
<span id="cb489-4"><a href="creating-maps-in-r.html#cb489-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span> </span>
<span id="cb489-5"><a href="creating-maps-in-r.html#cb489-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb489-6"><a href="creating-maps-in-r.html#cb489-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb489-7"><a href="creating-maps-in-r.html#cb489-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> </span>
<span id="cb489-8"><a href="creating-maps-in-r.html#cb489-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">&quot;EC&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">size =</span> .<span class="dv">2</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-319-1.png" width="672" /></p>
<p>The combination of shape and visual element is called a group.
As you have just seen each map can have multiple groups and each group can have multiple visual elements.</p>
</div>
<div id="map-extend" class="section level3 hasAnchor" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> Map extend<a href="creating-maps-in-r.html#map-extend" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The map uses the extend and projection of the first group, i.e. the data set that is specified in the first call to <code>tm_shape()</code>.</p>
<p>This can be changed by explicitly specifying the master shape with <code>is.master</code>.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="creating-maps-in-r.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span> </span>
<span id="cb490-2"><a href="creating-maps-in-r.html#cb490-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb490-3"><a href="creating-maps-in-r.html#cb490-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(<span class="fu">st_union</span>(saxony)) <span class="sc">+</span> </span>
<span id="cb490-4"><a href="creating-maps-in-r.html#cb490-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_borders</span>(<span class="at">lwd =</span> <span class="dv">2</span>, <span class="at">lty =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span> </span>
<span id="cb490-5"><a href="creating-maps-in-r.html#cb490-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb490-6"><a href="creating-maps-in-r.html#cb490-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb490-7"><a href="creating-maps-in-r.html#cb490-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(lucas, <span class="at">is.master=</span> T) <span class="sc">+</span> </span>
<span id="cb490-8"><a href="creating-maps-in-r.html#cb490-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_bubbles</span>(<span class="at">col =</span> <span class="st">&quot;EC&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">size =</span> .<span class="dv">2</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-320-1.png" width="672" /></p>
<p>Alternatively, the projection and extend can also be set manually.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="creating-maps-in-r.html#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">projection  =</span> <span class="dv">8857</span>) <span class="sc">+</span> </span>
<span id="cb491-2"><a href="creating-maps-in-r.html#cb491-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb491-3"><a href="creating-maps-in-r.html#cb491-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb491-4"><a href="creating-maps-in-r.html#cb491-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-321-1.png" width="672" /></p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="creating-maps-in-r.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="st">&quot;Europe&quot;</span>) <span class="sc">+</span> </span>
<span id="cb492-2"><a href="creating-maps-in-r.html#cb492-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb492-3"><a href="creating-maps-in-r.html#cb492-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb492-4"><a href="creating-maps-in-r.html#cb492-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-322-1.png" width="672" /></p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="creating-maps-in-r.html#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="st">&quot;Germany&quot;</span>) <span class="sc">+</span> </span>
<span id="cb493-2"><a href="creating-maps-in-r.html#cb493-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb493-3"><a href="creating-maps-in-r.html#cb493-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb493-4"><a href="creating-maps-in-r.html#cb493-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-322-2.png" width="672" /></p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="creating-maps-in-r.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="st">&quot;Bautzen&quot;</span>) <span class="sc">+</span> </span>
<span id="cb494-2"><a href="creating-maps-in-r.html#cb494-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb494-3"><a href="creating-maps-in-r.html#cb494-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb494-4"><a href="creating-maps-in-r.html#cb494-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-322-3.png" width="672" /></p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="creating-maps-in-r.html#cb495-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">14</span>, <span class="fl">50.8</span>, <span class="fl">51.3</span>)) <span class="sc">+</span> </span>
<span id="cb495-2"><a href="creating-maps-in-r.html#cb495-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb495-3"><a href="creating-maps-in-r.html#cb495-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb495-4"><a href="creating-maps-in-r.html#cb495-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-322-4.png" width="672" /></p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="creating-maps-in-r.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> lucas) <span class="sc">+</span> </span>
<span id="cb496-2"><a href="creating-maps-in-r.html#cb496-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb496-3"><a href="creating-maps-in-r.html#cb496-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb496-4"><a href="creating-maps-in-r.html#cb496-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-322-5.png" width="672" /></p>
<p>We can use place names, coordinates, or other data sets to set the map limits.</p>
</div>
</div>
<div id="further-map-elements" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Further map elements<a href="creating-maps-in-r.html#further-map-elements" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are additional elements we can add to our map.
Good maps should always have a north arrow and a scale bar.</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="creating-maps-in-r.html#cb497-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="st">&quot;Saxony&quot;</span>) <span class="sc">+</span> </span>
<span id="cb497-2"><a href="creating-maps-in-r.html#cb497-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb497-3"><a href="creating-maps-in-r.html#cb497-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb497-4"><a href="creating-maps-in-r.html#cb497-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb497-5"><a href="creating-maps-in-r.html#cb497-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb497-6"><a href="creating-maps-in-r.html#cb497-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-323-1.png" width="672" /></p>
<p>Further elements are graticules and credits.</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="creating-maps-in-r.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_graticules</span>() <span class="sc">+</span> </span>
<span id="cb498-2"><a href="creating-maps-in-r.html#cb498-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem, <span class="at">bbox =</span> <span class="st">&quot;Saxony&quot;</span>) <span class="sc">+</span> </span>
<span id="cb498-3"><a href="creating-maps-in-r.html#cb498-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb498-4"><a href="creating-maps-in-r.html#cb498-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb498-5"><a href="creating-maps-in-r.html#cb498-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>) <span class="sc">+</span> </span>
<span id="cb498-6"><a href="creating-maps-in-r.html#cb498-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_compass</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;top&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb498-7"><a href="creating-maps-in-r.html#cb498-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>, <span class="st">&quot;bottom&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb498-8"><a href="creating-maps-in-r.html#cb498-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_credits</span>(<span class="st">&quot;Jonathan Jupke, 2023&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-324-1.png" width="672" /></p>
<div id="making-the-map-prettier" class="section level3 hasAnchor" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> Making the map prettier<a href="creating-maps-in-r.html#making-the-map-prettier" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far we have only been concerned with putting data on our map.
Like all plots however, maps should convey their message and be nice to look at.
Your readers will have to spend more effort trying to understand an ugly map.
Generally, nicer figures are not only better in getting across your message.
They also convey a general sense of care - nice figures show that you put thought and effort into your document.</p>
<p>The maps we have created thus far do not convey this impression.<br />
To fix this, we need to address the background.
There are two options: using a base map or a background color.
The latter is easier, so I will show it first.</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb499-1"><a href="creating-maps-in-r.html#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span> </span>
<span id="cb499-2"><a href="creating-maps-in-r.html#cb499-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb499-3"><a href="creating-maps-in-r.html#cb499-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_layout</span>(<span class="at">bg.color =</span> <span class="st">&quot;lightblue&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-325-1.png" width="672" /></p>
<p>Background colors can be an easy solution.
They can however, also invoke false impressions.
The above map, for example, makes it seem like Saxony is an island.</p>
<p>Base maps are maps on which your data is drawn.
They are usually rasters and can be downloaded from multiple sources.
Here, we will use the <code>maptiles</code> package <span class="citation">(<a href="#ref-Giraud2022" role="doc-biblioref">Giraud 2022</a>)</span>.
This package basically has just one function: <code>get_tiles()</code>.
That function downloads a base map for you.
We provide a spatial object (sf, sfc, bbox, SpatRaster, SpatVerctor, or SpatExtent object) to its <code>x</code> argument, the base map style we would like to the <code>provider</code> arguments (see <a href="https://rgeomatic.hypotheses.org/2032">here</a> for examples), and the level of detail to the <code>zoom</code> argument.</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="creating-maps-in-r.html#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maptiles)</span>
<span id="cb500-2"><a href="creating-maps-in-r.html#cb500-2" aria-hidden="true" tabindex="-1"></a>bm <span class="ot">&lt;-</span> <span class="fu">get_tiles</span>(<span class="at">x =</span> saxony_dem, </span>
<span id="cb500-3"><a href="creating-maps-in-r.html#cb500-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">provider =</span> <span class="st">&quot;Stamen.TerrainBackground&quot;</span>, </span>
<span id="cb500-4"><a href="creating-maps-in-r.html#cb500-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">zoom =</span> <span class="dv">8</span>,</span>
<span id="cb500-5"><a href="creating-maps-in-r.html#cb500-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">crop =</span> <span class="st">&quot;TRUE&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="creating-maps-in-r.html#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bm) <span class="sc">+</span></span>
<span id="cb501-2"><a href="creating-maps-in-r.html#cb501-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_rgb</span>() <span class="sc">+</span></span>
<span id="cb501-3"><a href="creating-maps-in-r.html#cb501-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span></span>
<span id="cb501-4"><a href="creating-maps-in-r.html#cb501-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-327-1.png" width="672" /></p>
<p>Second, the legend is often covering parts of the map. We can avoid this by moving it outside.</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="creating-maps-in-r.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bm) <span class="sc">+</span></span>
<span id="cb502-2"><a href="creating-maps-in-r.html#cb502-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_rgb</span>() <span class="sc">+</span></span>
<span id="cb502-3"><a href="creating-maps-in-r.html#cb502-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span></span>
<span id="cb502-4"><a href="creating-maps-in-r.html#cb502-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>() <span class="sc">+</span> </span>
<span id="cb502-5"><a href="creating-maps-in-r.html#cb502-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-328-1.png" width="672" /></p>
<p>Lastly, the color scale is rather unusual for a DEM.
Here we use nicer colors and also add all the other elements to the map.
You can have a look at all the palettes available to <code>tmap</code> if you call <code>tmaptools::palette_explorer()</code>.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="creating-maps-in-r.html#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tm_shape</span>(bm) <span class="sc">+</span></span>
<span id="cb503-2"><a href="creating-maps-in-r.html#cb503-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_rgb</span>() <span class="sc">+</span></span>
<span id="cb503-3"><a href="creating-maps-in-r.html#cb503-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(saxony_dem) <span class="sc">+</span></span>
<span id="cb503-4"><a href="creating-maps-in-r.html#cb503-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_raster</span>(<span class="at">palette =</span> <span class="fu">terrain.colors</span>(<span class="at">n =</span> <span class="dv">20</span>), <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">title =</span> <span class="st">&quot;Elevation [m]&quot;</span>) <span class="sc">+</span> </span>
<span id="cb503-5"><a href="creating-maps-in-r.html#cb503-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(rivers) <span class="sc">+</span> </span>
<span id="cb503-6"><a href="creating-maps-in-r.html#cb503-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_lines</span>(<span class="at">col =</span> <span class="st">&quot;lightblue&quot;</span>) <span class="sc">+</span></span>
<span id="cb503-7"><a href="creating-maps-in-r.html#cb503-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_shape</span>(lucas) <span class="sc">+</span> </span>
<span id="cb503-8"><a href="creating-maps-in-r.html#cb503-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_dots</span>(<span class="at">size =</span> .<span class="dv">3</span>, <span class="at">col =</span> <span class="st">&quot;EC&quot;</span>, <span class="at">palette =</span> <span class="st">&quot;inferno&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Electrical Conductivity [μS]&quot;</span>) <span class="sc">+</span> </span>
<span id="cb503-9"><a href="creating-maps-in-r.html#cb503-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_compass</span>() <span class="sc">+</span> </span>
<span id="cb503-10"><a href="creating-maps-in-r.html#cb503-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_scale_bar</span>() <span class="sc">+</span> </span>
<span id="cb503-11"><a href="creating-maps-in-r.html#cb503-11" aria-hidden="true" tabindex="-1"></a>        <span class="fu">tm_layout</span>(<span class="at">legend.outside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb503-12"><a href="creating-maps-in-r.html#cb503-12" aria-hidden="true" tabindex="-1"></a>                  <span class="at">main.title =</span> <span class="st">&quot;Electrical Conductivity in Saxony&quot;</span></span>
<span id="cb503-13"><a href="creating-maps-in-r.html#cb503-13" aria-hidden="true" tabindex="-1"></a>                  ) </span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-329-1.png" width="672" /></p>
<p>It can also be nice to create maps with an inset, i.e. maps that include a smaller map that shows the larger context of the map. This is possible with <code>tmap</code> but extends beyond the scope of this chapter.
See <a href="https://ecodiv.earth/post/creating-a-map-with-inset-using-tmap/">here</a> for a tutorial.</p>
</div>
<div id="save-to-maps-to-file" class="section level3 hasAnchor" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> Save to maps to file<a href="creating-maps-in-r.html#save-to-maps-to-file" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can save tmap objects to file with the <code>tmap_save()</code> function.</p>

</div>
</div>
</div>
<h3> References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-Giraud2022" class="csl-entry">
Giraud, Timothée. 2022. <em>Maptiles: Download and Display Map Tiles</em>. <a href="https://CRAN.R-project.org/package=maptiles">https://CRAN.R-project.org/package=maptiles</a>.
</div>
<div id="ref-Hijmans2022b" class="csl-entry">
Hijmans, Robert J., Aniruddha Ghosh, and Alex Mandel. 2022. <em>Geodata: Download Geographic Data</em>. <a href="https://CRAN.R-project.org/package=geodata">https://CRAN.R-project.org/package=geodata</a>.
</div>
<div id="ref-Tennekes2018" class="csl-entry">
Tennekes, Martijn. 2018. <span>“<span class="nocase">tmap</span>: Thematic Maps in <span>R</span>.”</span> <em>Journal of Statistical Software</em> 84 (6): 1–39. <a href="https://doi.org/10.18637/jss.v084.i06">https://doi.org/10.18637/jss.v084.i06</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="rasters-in-r-the-terra-package.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/07-Maps.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
