<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Rasteroperationen | Einführung in GIS - QGIS</title>
  <meta name="description" content="7 Rasteroperationen | Einführung in GIS - QGIS" />
  <meta name="generator" content="bookdown 0.33 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Rasteroperationen | Einführung in GIS - QGIS" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Rasteroperationen | Einführung in GIS - QGIS" />
  
  
  

<meta name="author" content="Jonathan Jupke" />


<meta name="date" content="2023-04-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="digitalisierung.html"/>
<link rel="next" href="karten-speichern.html"/>
<script src="book_assets/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="book_assets/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="book_assets/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="book_assets/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="book_assets/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="book_assets/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a></li>
<li class="chapter" data-level="2" data-path="erste-schritte.html"><a href="erste-schritte.html"><i class="fa fa-check"></i><b>2</b> Erste Schritte</a>
<ul>
<li class="chapter" data-level="2.1" data-path="erste-schritte.html"><a href="erste-schritte.html#qgis-installieren"><i class="fa fa-check"></i><b>2.1</b> QGIS installieren</a></li>
<li class="chapter" data-level="2.2" data-path="erste-schritte.html"><a href="erste-schritte.html#was-sehe-ich-hier"><i class="fa fa-check"></i><b>2.2</b> Was sehe ich hier?</a></li>
<li class="chapter" data-level="2.3" data-path="erste-schritte.html"><a href="erste-schritte.html#wie-lade-ich-daten"><i class="fa fa-check"></i><b>2.3</b> Wie lade ich Daten?</a></li>
<li class="chapter" data-level="2.4" data-path="erste-schritte.html"><a href="erste-schritte.html#projekte"><i class="fa fa-check"></i><b>2.4</b> Projekte</a></li>
<li class="chapter" data-level="2.5" data-path="erste-schritte.html"><a href="erste-schritte.html#plug-ins"><i class="fa fa-check"></i><b>2.5</b> Plug-ins</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="symbologie.html"><a href="symbologie.html"><i class="fa fa-check"></i><b>3</b> Symbologie</a>
<ul>
<li class="chapter" data-level="3.1" data-path="symbologie.html"><a href="symbologie.html#punkte"><i class="fa fa-check"></i><b>3.1</b> Punkte</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="symbologie.html"><a href="symbologie.html#single-symbol"><i class="fa fa-check"></i><b>3.1.1</b> Single Symbol</a></li>
<li class="chapter" data-level="3.1.2" data-path="symbologie.html"><a href="symbologie.html#categorized"><i class="fa fa-check"></i><b>3.1.2</b> Categorized</a></li>
<li class="chapter" data-level="3.1.3" data-path="symbologie.html"><a href="symbologie.html#graduated"><i class="fa fa-check"></i><b>3.1.3</b> Graduated</a></li>
<li class="chapter" data-level="3.1.4" data-path="symbologie.html"><a href="symbologie.html#rule-based"><i class="fa fa-check"></i><b>3.1.4</b> Rule-based</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="symbologie.html"><a href="symbologie.html#linien-und-polygone"><i class="fa fa-check"></i><b>3.2</b> Linien und Polygone</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="vektoroperationen.html"><a href="vektoroperationen.html"><i class="fa fa-check"></i><b>4</b> Vektoroperationen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="vektoroperationen.html"><a href="vektoroperationen.html#die-datensätze"><i class="fa fa-check"></i><b>4.1</b> Die Datensätze</a></li>
<li class="chapter" data-level="4.2" data-path="vektoroperationen.html"><a href="vektoroperationen.html#die-attributtabelle"><i class="fa fa-check"></i><b>4.2</b> Die Attributtabelle</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="vektoroperationen.html"><a href="vektoroperationen.html#zeilen-auswählen"><i class="fa fa-check"></i><b>4.2.1</b> Zeilen auswählen</a></li>
<li class="chapter" data-level="4.2.2" data-path="vektoroperationen.html"><a href="vektoroperationen.html#der-field-calculator"><i class="fa fa-check"></i><b>4.2.2</b> Der Field Calculator</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="vektoroperationen.html"><a href="vektoroperationen.html#vektoroperationen-1"><i class="fa fa-check"></i><b>4.3</b> Vektoroperationen</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="vektoroperationen.html"><a href="vektoroperationen.html#clip"><i class="fa fa-check"></i><b>4.3.1</b> Clip</a></li>
<li class="chapter" data-level="4.3.2" data-path="vektoroperationen.html"><a href="vektoroperationen.html#buffer"><i class="fa fa-check"></i><b>4.3.2</b> Buffer</a></li>
<li class="chapter" data-level="4.3.3" data-path="vektoroperationen.html"><a href="vektoroperationen.html#convex-hull"><i class="fa fa-check"></i><b>4.3.3</b> Convex hull</a></li>
<li class="chapter" data-level="4.3.4" data-path="vektoroperationen.html"><a href="vektoroperationen.html#difference"><i class="fa fa-check"></i><b>4.3.4</b> Difference</a></li>
<li class="chapter" data-level="4.3.5" data-path="vektoroperationen.html"><a href="vektoroperationen.html#dissolve"><i class="fa fa-check"></i><b>4.3.5</b> Dissolve</a></li>
<li class="chapter" data-level="4.3.6" data-path="vektoroperationen.html"><a href="vektoroperationen.html#intersection"><i class="fa fa-check"></i><b>4.3.6</b> Intersection</a></li>
<li class="chapter" data-level="4.3.7" data-path="vektoroperationen.html"><a href="vektoroperationen.html#union"><i class="fa fa-check"></i><b>4.3.7</b> Union</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="vektoroperationen.html"><a href="vektoroperationen.html#misc"><i class="fa fa-check"></i><b>4.4</b> Misc</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="vektoroperationen.html"><a href="vektoroperationen.html#minimum-bounding-geometry"><i class="fa fa-check"></i><b>4.4.1</b> Minimum bounding geometry</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="koordinatenbezugssysteme.html"><a href="koordinatenbezugssysteme.html"><i class="fa fa-check"></i><b>5</b> Koordinatenbezugssysteme</a>
<ul>
<li class="chapter" data-level="5.1" data-path="koordinatenbezugssysteme.html"><a href="koordinatenbezugssysteme.html#welches-koordinatenbezugssystem-haben-meine-daten"><i class="fa fa-check"></i><b>5.1</b> Welches Koordinatenbezugssystem haben meine Daten?</a></li>
<li class="chapter" data-level="5.2" data-path="koordinatenbezugssysteme.html"><a href="koordinatenbezugssysteme.html#wie-ändere-ich-das-koordinatenbezugssystem-meiner-daten"><i class="fa fa-check"></i><b>5.2</b> Wie ändere ich das Koordinatenbezugssystem meiner Daten?</a></li>
<li class="chapter" data-level="5.3" data-path="koordinatenbezugssysteme.html"><a href="koordinatenbezugssysteme.html#wie-finde-ich-das-koordinatenbezugssystem-herraus"><i class="fa fa-check"></i><b>5.3</b> Wie finde ich das Koordinatenbezugssystem herraus?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="digitalisierung.html"><a href="digitalisierung.html"><i class="fa fa-check"></i><b>6</b> Digitalisierung</a>
<ul>
<li class="chapter" data-level="6.1" data-path="digitalisierung.html"><a href="digitalisierung.html#keycoding"><i class="fa fa-check"></i><b>6.1</b> Keycoding</a></li>
<li class="chapter" data-level="6.2" data-path="digitalisierung.html"><a href="digitalisierung.html#erstellen-eines-neuen-vektorlayers"><i class="fa fa-check"></i><b>6.2</b> Erstellen eines neuen Vektorlayers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rasteroperationen.html"><a href="rasteroperationen.html"><i class="fa fa-check"></i><b>7</b> Rasteroperationen</a>
<ul>
<li class="chapter" data-level="7.1" data-path="rasteroperationen.html"><a href="rasteroperationen.html#einführung"><i class="fa fa-check"></i><b>7.1</b> Einführung</a></li>
<li class="chapter" data-level="7.2" data-path="rasteroperationen.html"><a href="rasteroperationen.html#darstellung-von-rastern"><i class="fa fa-check"></i><b>7.2</b> Darstellung von Rastern</a></li>
<li class="chapter" data-level="7.3" data-path="rasteroperationen.html"><a href="rasteroperationen.html#rasteralgebra"><i class="fa fa-check"></i><b>7.3</b> Rasteralgebra</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="rasteroperationen.html"><a href="rasteroperationen.html#lokale-funktionen"><i class="fa fa-check"></i><b>7.3.1</b> Lokale Funktionen</a></li>
<li class="chapter" data-level="7.3.2" data-path="rasteroperationen.html"><a href="rasteroperationen.html#fokale-funktionen"><i class="fa fa-check"></i><b>7.3.2</b> Fokale Funktionen</a></li>
<li class="chapter" data-level="7.3.3" data-path="rasteroperationen.html"><a href="rasteroperationen.html#zonale-funktionen"><i class="fa fa-check"></i><b>7.3.3</b> Zonale Funktionen</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="rasteroperationen.html"><a href="rasteroperationen.html#terrain-analysis"><i class="fa fa-check"></i><b>7.4</b> Terrain Analysis</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="rasteroperationen.html"><a href="rasteroperationen.html#gefälle-aspekt"><i class="fa fa-check"></i><b>7.4.1</b> Gefälle &amp; Aspekt</a></li>
<li class="chapter" data-level="7.4.2" data-path="rasteroperationen.html"><a href="rasteroperationen.html#gewässernetzwerk"><i class="fa fa-check"></i><b>7.4.2</b> Gewässernetzwerk</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="rasteroperationen.html"><a href="rasteroperationen.html#ndvi-berechnen"><i class="fa fa-check"></i><b>7.5</b> NDVI berechnen</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="karten-speichern.html"><a href="karten-speichern.html"><i class="fa fa-check"></i><b>8</b> Karten speichern</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Einführung in GIS - QGIS</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="rasteroperationen" class="section level1 hasAnchor" number="7">
<h1><span class="header-section-number">7</span> Rasteroperationen<a href="rasteroperationen.html#rasteroperationen" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="einführung" class="section level2 hasAnchor" number="7.1">
<h2><span class="header-section-number">7.1</span> Einführung<a href="rasteroperationen.html#einführung" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Als erstes Beispiel nutzen wir hier ein digitales Höhenmodell (digital elevation model, DEM) für Deutschland. Die Datei <em>DEM_deutschland.tif</em> findet ihr in <a href="https://seafile.rlp.net/d/9c5ce464775a429386eb/">Datenordner</a>. Wir laden die Datei über den <em>Data Source Manage</em> (Strg + L). Im Data Source Manager wählt ihr links den Reiter <em>Raster</em> und bei <em>Raster dataset(s)</em> könnt ihr mit einem Klick auf <img src="inline/selectstring.png" /> die gewünschte Datei auf dem Computer auswählen.</p>
<p>Der Raster erscheint nun in schwarz-weiß (Abb. <a href="rasteroperationen.html#fig:raster1">7.1</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster1"></span>
<img src="fig/raster1.png" alt="DEM für Deutschland nach dem Laden" width="452" />
<p class="caption">
Figure 7.1: DEM für Deutschland nach dem Laden
</p>
</div>
<p>Helle Regionen sind höher und dunklere tiefer. Links im <em>Layer Panel</em> wird euch die Farbskala mit Minimal- und Maximalwert angezeigt. Wie bei einem Vektor Layer können wir mit Rechtsklick auf den Layer über <em>Properties</em> die meisten wichtigen Informatonen abrufen und einge Eigenschaften anpassen.
Oben im Properties Fenster seht ihr den <em>Information</em> (<img src="inline/metadata.png" />; Abb. <a href="rasteroperationen.html#fig:raster2">7.2</a>) Reiter .</p>
<div class="figure"><span style="display:block;" id="fig:raster2"></span>
<img src="fig/raster2.png" alt="Information Reiter in Properties Fenster" width="408" />
<p class="caption">
Figure 7.2: Information Reiter in Properties Fenster
</p>
</div>
<p>Unter der Überschift <strong>General</strong> sehen wir Informationen zum Namen (<strong>Name</strong>), dem Dateipfad (<strong>Path</strong>), der Dateigröße (<strong>Size</strong>), dem Datum an dem die Datei das letzt mal verändert wurde (<strong>Last modified</strong>) sowie der Software die genutzt wurde um die Datei in QGIS zu laden (<strong>Provider</strong>).<br />
Danach kommen nähere Informationen zu den Eigenschaften des Rasters. Das Ausmaß (<strong>Extent</strong>) also die jeweils größten und kleinsten X- und Y-Koordinaten. Width und Height geben die Anzahl der Spalten und Reihen des Rasters an. Der <em>Data type</em> beschreibt die Art der Variable die in den einzelnen Zellen gespeichert ist. In diesem Fall <em>Float32</em> also eine Kommazahl (floating point number) bei der für jede Zahl 32 bit (binary digits) freigehalten werden. Mit 64 bit könnte man mehr verschiedene Zahlen darstellen (<span class="math inline">\(2^{64}\)</span> anstelle von <span class="math inline">\(2^{32}\)</span>) aber die Datei wäre größer. Der GDAL Driver gibt an welchen Treiber GDAL (der Provider) benutzt hat um die Datei zu laden. Unter Band1 sehen wir zusammenfassende Informationen zum ersten Band (und in diesem Fall einzigen Band). Was ist der maximale Wert, der minimale, der Mittelwert und die Standardabweichung.</p>
</div>
<div id="darstellung-von-rastern" class="section level2 hasAnchor" number="7.2">
<h2><span class="header-section-number">7.2</span> Darstellung von Rastern<a href="rasteroperationen.html#darstellung-von-rastern" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Unter <strong>Symbology</strong> (<img src="inline/symbology.png" />, Abb. <a href="rasteroperationen.html#fig:raster3">7.3</a>) können wir die Darstellung anpassen.</p>
<div class="figure"><span style="display:block;" id="fig:raster3"></span>
<img src="fig/raster3.png" alt="Raster Symbologie" width="404" />
<p class="caption">
Figure 7.3: Raster Symbologie
</p>
</div>
<p>Die wichtigste Einstellung hier ist gleich die oberste: <strong>Render type</strong>. In dem drop-down Menü gibt es die Auswahlmöglichkeiten: <em>Multiband Color</em>, <em>Paletted/ Unique Values</em>, <em>Singleband grey</em>, <em>Singleband pseudocolor</em>, <em>Hillshade</em> und <em>Contours</em>. Standardmäßig ist hier <em>Singleband grey</em> eingestellt. Die <strong>Render type</strong> Einstellung bestimmt was für Optionen und Fenster im restlichen Menü zu sehen sind.<br />
Bei <em>Singleband grey</em> können wir unter <strong>Color gradient</strong> den Gradienten umdrehen (hohe Werte dunkel tiefe Werte hell). Darunter werden der Maximal- und Minimalwert angezeigt und bei <strong>contrast enhancement</strong> können wir mithilfe dieser Zahlenspanne die Darstellung anpassen. Mit der Einstellung <em>no enhancement</em> habe alle Zellen die gleiche Farbe. Mit <em>Strech to MinMax</em> wird der schwarz-weiß Gradient an die angegebene Minimal- und Maximalwerte angepasst. Diese Werte müssen nicht den tasächlichen Werten des Rasters entsprechen. Ihr könnt auch nur einen Teil davon für den Gradienten nutzen. Alle Werte die über dem Maximum liegen bzw. alle Werte die unter dem Minimum liegen bekommen die gleiche Farbe wie das Maximum bzw. Minimum. Mit <em>Stretch and Clip to MinMax</em> werden Zellen mit Werten außerhalb des angegebenen Zahlenraums entfernt. Bei unserem DEM können wir so die negativen Werte entfernen. <em>Clip to MinMax</em> entfernt Zellen mit Werten außerhalb des angegebenen Zahlenraumes ohne die restlichen Zellen einzufärben.</p>
<p>Bei <em>Singleband pseudocolor</em> können wir eine anderen Farbgradienten wählen als schwarz-weiß. Den Farbgradienten wählt ihr mit dem kleinen Pfeil rechts des Gradienten bei <strong>color ramp</strong>. Im Fenster darunter seht ihr die Farben, die den jeweiligen Zahlenbereichen zugeordnet sind.
Unter dem Fenster könnt ihr bei <strong>Mode</strong> ändern wie die Farben den Zahlenbereichen zugeordnet werden. Mit <em>Equal Interval</em> wählen wir, dass die Gruppen zwischen Minimalwert und Maximalwert alle die gleiche Menge an Höhenmetern abdecken. Mit <strong>Classes</strong> können wir die Anzahl an Gruppen anpassen.</p>
<p>Die Einstellung <em>Paletted/ Unique Values</em> ist für Raster geeignet die kategorische Variablen darstellen wie z.B. Landnutzungstyp (LULC Daten). Hier bekommt jeder Werte eine eingene Farbe und die Farben liegen nicht auf einem gemeinsamen Farbgradienten. Die Farben sollten möglichst unterschiedlich sein, damit die Kategorien klar voneinenander unterscheidbar sind. Als Beispiel zeige ich hier die CORINE Land Cover Daten (<a href="https://land.copernicus.eu/pan-european/corine-land-cover">hier</a> verfügbar). In Abbildung <a href="rasteroperationen.html#fig:raster4">7.4</a> ist die schwarz-weiß Darstellung und das Symbologiefenster von <em>Paletted/ Unique Values</em>.</p>
<div class="figure"><span style="display:block;" id="fig:raster4"></span>
<img src="fig/raster4.png" alt="CORINE Landcover Daten in schwarz-weiß" width="716" />
<p class="caption">
Figure 7.4: CORINE Landcover Daten in schwarz-weiß
</p>
</div>
<p>Wenn wir dort auf <strong>classify</strong> klicken wird jedem Wert des Rasters eine Farbe zugeordnet. Nachdem wir auf <strong>Apply</strong> klicken wird dies im <strong>Map View</strong> auch dargestellt. Abbildung <a href="rasteroperationen.html#fig:raster5">7.5</a> zeigt einen Ausschnitt der so erstellten Karte.</p>
<div class="figure"><span style="display:block;" id="fig:raster5"></span>
<img src="fig/raster5.png" alt="CORINE Landcover Daten mit Paletted Values" width="454" />
<p class="caption">
Figure 7.5: CORINE Landcover Daten mit Paletted Values
</p>
</div>
<p>Die Einstellung <em>Multiband Color</em> ist für Raster mit mehreren Bändern geeignet. Das sind vor allem Satellitenfotos. Ein Beispiel für so eine Datei ist <em>orthophoto.tif</em> im <a href="https://seafile.rlp.net/d/9c5ce464775a429386eb">Dateiordner</a>. Ihr könnt die Datei wie jeden anderen Raster auf in QGIS laden. In QGIS werden die drei Bänder der Datei im <strong>Layer Panel</strong> angezeigt. Jedes Band enthält die Intensität von einer Farbe: Band 1 rot, Band 2 grün und Band 3 blau. Jedes Band reicht von 0 bis 255, hat also 256 Werte, was sich mit einem 8bit Integer (<span class="math inline">\(2^8 = 256\)</span>) speichern lässt. Auf diese Art und Weise lassen sich Farben mit ihrem RGB (rot, grün, blau) Wert speichern. Die Extremata sind schwarz (0,0,0) und weiß (255,255,255). Für diesen Raster mit drei Bändern hat QGIS automatisch den <strong>Render type</strong> <em>Multiband Color</em> gewählt.</p>
<p>Die letzten beiden Typen <em>Hillshade</em> und <em>Contours</em> werden eher selten genutzt. Erstere täuschen einen 3D Effekt vor und letztere erstellen eine Karte mit Isolinien (beim DEM Isohypsen). Hillshades werden wir im Kapitel <a href="rasteroperationen.html#terrain-analysis">Terrain Analysis</a> näher betrachten.</p>
</div>
<div id="rasteralgebra" class="section level2 hasAnchor" number="7.3">
<h2><span class="header-section-number">7.3</span> Rasteralgebra<a href="rasteroperationen.html#rasteralgebra" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Rasteralgebra ist in QGIS im <strong>Raster calculator</strong> verfügbar (Abb. <a href="rasteroperationen.html#fig:raster6">7.6</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster6"></span>
<img src="fig/raster6.png" alt="Knopf um den Raster calculator zu öffnen" width="328" />
<p class="caption">
Figure 7.6: Knopf um den Raster calculator zu öffnen
</p>
</div>
<p>Öffnen wir den <strong>Raster calculator</strong>, öffnet sich folgendes Fenster (Abb. <a href="rasteroperationen.html#fig:raster7">7.7</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster7"></span>
<img src="fig/raster7.png" alt="Der Raster calculator" width="378" />
<p class="caption">
Figure 7.7: Der Raster calculator
</p>
</div>
<p>Alle aktuell geladenen Raster werden im Fenster <em>Raster bands</em> (blau Abb. <a href="rasteroperationen.html#fig:raster7">7.7</a>) aufgeführt. Befehle für Funktionen (unter Operators) werden im Fenster <em>Raster calculator expression</em> eingegeben (grün Abb. <a href="rasteroperationen.html#fig:raster7">7.7</a>). Ausdehnung und Reihen- sowie Spaltenzahl können unter <em>Spatial Extent</em> (gelb Abb. <a href="rasteroperationen.html#fig:raster7">7.7</a>) angepasst werden. Unter <em>Result Layer</em> (orange Abb. <a href="rasteroperationen.html#fig:raster7">7.7</a>) könnt ihr einstellen ob der resultierende Layer gespeichert werden soll oder nach schließen der aktuellen QGIS Sitzung gelöscht werden soll (Option <em>Create on-the-fly raster …</em>). Bevor ihr die Funktion mit einem Klick auf <strong>OK</strong> ausführen könnt müsst ihr entweder einen Namen für die zu speichernde Datei auswählen oder die <em>create-on-the-fly</em> Option markiert haben.</p>
<div id="lokale-funktionen" class="section level3 hasAnchor" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> Lokale Funktionen<a href="rasteroperationen.html#lokale-funktionen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>Mathematische Funktionen</strong><br />
Mathematische Funktionen können einfach wie bei einem Taschenrechner eingegeben werden. Wenn wir den DEM von Deutschland um 40 Meter erhöhen wollen können wir folgenden Befehl ausführen (Abb. <a href="rasteroperationen.html#fig:raster8">7.8</a>). Mit anderen mathematischen Funktionen (-, *, /, exp) funktiert das genauso.</p>
<div class="figure"><span style="display:block;" id="fig:raster8"></span>
<img src="fig/raster8.png" alt="Raster calculator: +" width="372" />
<p class="caption">
Figure 7.8: Raster calculator: +
</p>
</div>
<p><strong>Logische Funktionen</strong><br />
Um logische Funktionen zu demonstrieren erstellen wir eine Version des DEM in dem nur Zellen mit über 400 Meter Höhe üNN enthalten sind.</p>
<div class="figure"><span style="display:block;" id="fig:raster9"></span>
<img src="fig/raster9.png" alt="Befehl für Zellen mit Werten größer 400" width="368" />
<p class="caption">
Figure 7.9: Befehl für Zellen mit Werten größer 400
</p>
</div>
<p>Das Ergebniss ist ein Raster mit drei verschiedenen Zellwerten: 0 (&lt;=400), 1(&gt;400) und eine sehr große negative Zahl für fehlende Werte (außerhalb von Deutschland). Da wir nun eine kategorische Variable haben ist der Darstellungsstyl <em>Paletted</em> passend (Abb. <a href="rasteroperationen.html#fig:raster10">7.10</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster10"></span>
<img src="fig/raster10.png" alt="Raster mit zwei Höhenklassen" width="446" />
<p class="caption">
Figure 7.10: Raster mit zwei Höhenklassen
</p>
</div>
<p>Wenn wir nun diesen Layer mit dem Originallayer multiplizieren würde wir einen Layer erhalten, in dem alle Zellen mit einer Höhe von über 400m ihren ursprünglichen Höhenwert haben und alle anderen 0.</p>
<p><strong>Reclassification</strong></p>
<p>Einfacher geht das allerdings mit dem <strong>Reclassification by table</strong> Tool, das ihr über die <strong>Processing Toolbox</strong> öffnen könnt (Abb. <a href="rasteroperationen.html#fig:raster11">7.11</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster11"></span>
<img src="fig/raster11.png" alt="Reclassification by table" width="446" />
<p class="caption">
Figure 7.11: Reclassification by table
</p>
</div>
<p>Unter <em>Reclassification Table</em> könnt ihr mit einem Klick auf <img src="inline/selectstring.png" /> eine Tabelle erstellen um eine kontinuierliche Variable (z.B. Höhe) in Klassen einzuteilen.
Meine Beispieltabelle seht ihr in Abbildung <a href="rasteroperationen.html#fig:raster12">7.12</a>.</p>
<div class="figure"><span style="display:block;" id="fig:raster12"></span>
<img src="fig/raster12.png" alt="Reclassification table" width="444" />
<p class="caption">
Figure 7.12: Reclassification table
</p>
</div>
<p>Ihr müsst auf <strong>OK</strong> klicken, damit die Tabelle auch gespeichert wird. Wenn ihr jetzt auf <em>Run</em> klickt wird der neue Raster berechnet. Da es im Fall des DEMs für Deutschland Werte &lt; 0 als kleiner als die untere Grenze der untersten Klasse gibt haben wir mehr als die vier Klassen erhalten (Abb. <a href="rasteroperationen.html#fig:raster13">7.13</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster13"></span>
<img src="fig/raster13.png" alt="Einzelwerte angezeigt bei Paletted" width="606" />
<p class="caption">
Figure 7.13: Einzelwerte angezeigt bei Paletted
</p>
</div>
<p>Alle Werte die nicht von uns bestimmten Klassen entsprechen können wir löschen indem wir sie auswählen und auf die rote Minus Taste rechts von <em>classify</em> drücken. Für eine bessere Darstellug klicken wir außerdem auf die Farbleiste und wählen im nun erscheinenden Fenster oben rechts <em>Discrete</em> anstelle von <em>Continuous</em>. Die so erzeugte Karte seht ihr in Abbildug <a href="rasteroperationen.html#fig:raster14">7.14</a>.</p>
<div class="figure"><span style="display:block;" id="fig:raster14"></span>
<img src="fig/raster14.png" alt="Deutschland in vier Höhenklassen" width="467" />
<p class="caption">
Figure 7.14: Deutschland in vier Höhenklassen
</p>
</div>
</div>
<div id="fokale-funktionen" class="section level3 hasAnchor" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> Fokale Funktionen<a href="rasteroperationen.html#fokale-funktionen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Um fokale Funktionen außerhalb der Terrainanalyse zu berechnen muss QGIS auf GRASS GIS zurückgreifen. Ihr solltet GRASS GIS in der <em>Processing Toolbox</em> sehen (Abb. <a href="rasteroperationen.html#fig:raster15">7.15</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster15"></span>
<img src="fig/raster15.png" alt="Deutschland in vier Höhenklassen" width="208" />
<p class="caption">
Figure 7.15: Deutschland in vier Höhenklassen
</p>
</div>
<p>Falls ihr GRASS GIS dort nicht seht kontrolliert ob die beiden GRASS Plugins (GRASS 7 und GRASS GIS provider) aktiviert sind.</p>
<p>Sucht in der <strong>Processing Toolbox</strong> nach <strong>r.neighbors</strong>. In dieser Funktion könnt ihr unter <em>Input Raster Layer</em> den Input Layer wählen, unter <em>Neighborhood operation</em> was für eine Statistik berechnet werden soll und unter <em>Neighborhood Size</em> die Größe des moving window.</p>
</div>
<div id="zonale-funktionen" class="section level3 hasAnchor" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> Zonale Funktionen<a href="rasteroperationen.html#zonale-funktionen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Zonale Statistken können wir in QGIS dem <strong>Zonal statistic</strong> Tool berechnen. Als Beispiel berechnen wir hier den Mittelwert des DEM für jeden Bezirk in meinem Landkreis. In Abbildung <a href="rasteroperationen.html#fig:raster16">7.16</a> seht ihr das Fenster der <strong>Zonal statistic</strong> Funktion.</p>
<div class="figure"><span style="display:block;" id="fig:raster16"></span>
<img src="fig/raster16.png" alt=" Zonal statistic Tool" width="444" />
<p class="caption">
Figure 7.16:  Zonal statistic Tool
</p>
</div>
<p>Bei <em>Input</em> wählen wir den Layer mit den Zonen, für die wir die Werte berechnen wollen. Bei <em>Raster Layer</em> den Raster von dem wir die Werte berechnen wollen. Die berechneten Werte werden der Attirbuttabelle des Inputlayers als Spalten hinzugefügt. Bei <em>Output column prefix</em> könnt ihr einen Präfix für die Spaltennamen wählen. Ich wähle hier den Präfix <em>hoehe_</em>. Unter <em>Statistics to calculate</em> könnt ihr die gewünschten Statistiken auswählen. Standardt ist <em>count</em>, <em>sum</em> und <em>mean</em>. Da wir hier nur am Mittelwert interressiert sind wähle ich nur <em>mean</em>. Abbildung <a href="rasteroperationen.html#fig:raster17">7.17</a> zeigt die nach mittlerer Höhe eingefärbten Bezirke.</p>
<div class="figure"><span style="display:block;" id="fig:raster17"></span>
<img src="fig/raster17.png" alt="Bezirke im Kreis Goslar mit mittlerer Höhe" width="509" />
<p class="caption">
Figure 7.17: Bezirke im Kreis Goslar mit mittlerer Höhe
</p>
</div>
</div>
</div>
<div id="terrain-analysis" class="section level2 hasAnchor" number="7.4">
<h2><span class="header-section-number">7.4</span> Terrain Analysis<a href="rasteroperationen.html#terrain-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die Funktionen der Terrain Analyse findet ihr unter <em>Raster</em> <span class="math inline">\(\rightarrow\)</span> <em>Analysis</em>.</p>
<div id="gefälle-aspekt" class="section level3 hasAnchor" number="7.4.1">
<h3><span class="header-section-number">7.4.1</span> Gefälle &amp; Aspekt<a href="rasteroperationen.html#gefälle-aspekt" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Die meisten in der Vorlesung besprochenen Funktionen finden sich in dem <em>Analysis</em> Menü mit selbsterklärenden Namen.
Mit <em>Slope</em> berechnen wir das Gefälle unseres DEMs und mit <em>Aspect</em> die Richtung des stärksten Gefälles.</p>
</div>
<div id="gewässernetzwerk" class="section level3 hasAnchor" number="7.4.2">
<h3><span class="header-section-number">7.4.2</span> Gewässernetzwerk<a href="rasteroperationen.html#gewässernetzwerk" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Hierfür nutzen wir Funktion aus SAGA GIS. Auch hier gilt, falls ihr SAGA GIS nicht in eurer <strong>Processing Toolbox</strong> seht, üperprüft ob das entsprechende Plugin aktiviert ist. Als erstes füllen wir die Lücken in unserem DEM mit der Funktion <strong>Fill Sinks (Wang &amp; Liu)</strong>. In der Funktion müssen wir nur unser DEM angeben, die anderen Argumente können unverändert bleiben. Die Funktion erstellt drei Outputs: Flow Directions, Watershed Basins und Filled DEM. Den Filled DEM Layer nutzen wir nun als Input für die Funktion <strong>Strahler Order</strong>. Wieder müssen wir aus dem Input Layer keine Argumente ändern oder eingeben. Das Ergebnis seht ihr auf Abbildug <a href="rasteroperationen.html#fig:raster18">7.18</a>.</p>
<div class="figure"><span style="display:block;" id="fig:raster18"></span>
<img src="fig/raster18.png" alt="Gewässernetzerk für Deutschland - ohne Grenzwert" width="304" />
<p class="caption">
Figure 7.18: Gewässernetzerk für Deutschland - ohne Grenzwert
</p>
</div>
<p>Um das Netzwerk übersichtlicher zu machen entfernen wir kleinere Gewässer (Stahler Ordnung &lt; 2) mit dem <strong>Raster calculator</strong> und färben die übriggelbiebenen Gewässer als singleband pseudocolor blau ein (Abb. <a href="rasteroperationen.html#fig:raster19">7.19</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster19"></span>
<img src="fig/raster19.png" alt="Gewässernetzerk für Deutschland" width="274" />
<p class="caption">
Figure 7.19: Gewässernetzerk für Deutschland
</p>
</div>
</div>
</div>
<div id="ndvi-berechnen" class="section level2 hasAnchor" number="7.5">
<h2><span class="header-section-number">7.5</span> NDVI berechnen<a href="rasteroperationen.html#ndvi-berechnen" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Mithilfe des <em>Raster Calculators</em> und der benötigten Daten können wir den NDVI in QGIS berechnen.
Die notwendingen Satellitendaten könnt ihr entweder aus <a href="https://seafile.rlp.net/d/9c5ce464775a429386eb/">Datenordner</a> oder selber aus dem <a href="https://earthexplorer.usgs.gov/">EarthExplorer</a> laden. In der ersten Option ist nur das Bild für Landau verfügbar. Um das Bild für euren Kreis runterzuladen müsst ihr einen (kostenlosen) Account bei EarthExplorer anlegen. Eine ausführlche Anleitung zum Downloaden von Sattelitenbildern aus dem EarthExplorer gibt es <a href="https://gisgeography.com/usgs-earth-explorer-download-free-landsat-imagery/">hier</a>.</p>
<p><a href="https://landsat.gsfc.nasa.gov/satellites/landsat-8/landsat-8-bands/">Hier</a> bekommt ihr einen Überblick über die Bänder von Landsat 8. Das Near Infrared Band ist Band 5 und das Rot Band ist Band 4. Der NDVI <span class="math display">\[\dfrac{NIR - RED}{NIR + RED}\]</span> ist daher <span class="math display">\[\dfrac{Band5 - Band4}{Band5+Band4}\]</span>. Diese Formel können wir in den <strong>Raster Calculator</strong> eingeben (Abb. <a href="rasteroperationen.html#fig:raster20">7.20</a>) und erhalten dann einen NDVI Raster.</p>
<div class="figure"><span style="display:block;" id="fig:raster20"></span>
<img src="fig/raster20.png" alt="Eingabe im Raster Calculator um den NDVI zu berechnen" width="380" />
<p class="caption">
Figure 7.20: Eingabe im Raster Calculator um den NDVI zu berechnen
</p>
</div>
<p>Nachdem wir diesen mit einer Farbpalette die von braun über weiß zu grün reicht haben wir die folgende Karte (Abb. <a href="rasteroperationen.html#fig:raster21">7.21</a>).</p>
<div class="figure"><span style="display:block;" id="fig:raster21"></span>
<img src="fig/raster21.png" alt="NDVI Landau" width="322" />
<p class="caption">
Figure 7.21: NDVI Landau
</p>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="digitalisierung.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="karten-speichern.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="book_assets/gitbook-2.6.7/js/app.min.js"></script>
<script src="book_assets/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="book_assets/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="book_assets/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
